(()=>{"use strict";var e={i8:"i8",ui8:"ui8",ui8c:"ui8c",i16:"i16",ui16:"ui16",i32:"i32",ui32:"ui32",f32:"f32",f64:"f64",eid:"eid"},t={i8:"Int8",ui8:"Uint8",ui8c:"Uint8Clamped",i16:"Int16",ui16:"Uint16",i32:"Int32",ui32:"Uint32",eid:"Uint32",f32:"Float32",f64:"Float64"},n={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,eid:Uint32Array},o=(4,e=>4*Math.ceil(e/4)),r=Symbol("storeRef"),s=Symbol("storeSize"),i=Symbol("storeMaps"),l=Symbol("storeFlattened"),c=Symbol("storeBase"),a=Symbol("storeType"),u=Symbol("storeArrayElementCounts"),f=Symbol("storeSubarrays"),y=Symbol("subarrayCursors"),h=Symbol("subarray"),d=(Symbol("subarrayFrom"),Symbol("subarrayTo"),Symbol("parentArray")),g=Symbol("tagStore"),m=(Symbol("queryShadow"),Symbol("serializeShadow"),Symbol("indexType")),p=Symbol("indexBytes"),b=Symbol("isEidType"),S={},w=(e,t)=>{const n=new ArrayBuffer(t*e.BYTES_PER_ELEMENT),o=new e.constructor(n);return o.set(e,0),o},E=(r,s,i)=>{Object.keys(s).forEach((c=>{const g=s[c];Array.isArray(g)?(((r,s,i)=>{const l=r[y];let c=s[a];const g=s[0].length,b=g<=256?e.ui8:g<=65536?e.ui16:e.ui32;if(0===l[c]){const e=r[u][c],s=new n[c](o(e*i));s.set(r[f][c]),r[f][c]=s,s[m]=t[b],s[p]=n[b].BYTES_PER_ELEMENT}const S=l[c],w=S+i*g;l[c]=w,s[d]=r[f][c].subarray(S,w);for(let e=0;e<i;e++){const o=g*e,r=o+g;s[e]=s[d].subarray(o,r),s[e][m]=t[b],s[e][p]=n[b].BYTES_PER_ELEMENT,s[e][h]=!0}})(r,g,i),s[l].push(g)):ArrayBuffer.isView(g)?(s[c]=w(g,i),s[l].push(s[c])):"object"==typeof g&&E(r,s[c],i)}))},v=(e,t)=>{e[g]||(e[s]=t,e[l].length=0,Object.keys(e[y]).forEach((t=>{e[y][t]=0})),E(e,e,t))},A=(e,t)=>{e[l]&&e[l].forEach((e=>{ArrayBuffer.isView(e)?e[t]=0:e[t].fill(0)}))},x=e=>Array.isArray(e)&&"string"==typeof e[0]&&"number"==typeof e[1],M=()=>{const e=[],t=[];e.sort=function(n){const o=Array.prototype.sort.call(this,n);for(let n=0;n<e.length;n++)t[e[n]]=n;return o};const n=n=>e[t[n]]===n;return{add:o=>{n(o)||(t[o]=e.push(o)-1)},remove:o=>{if(!n(o))return;const r=t[o],s=e.pop();s!==o&&(e[r]=s,t[s]=r)},has:n,sparse:t,dense:e}},k=e=>t=>!e(t),C=(k((e=>e[l])),e=>"function"==typeof e),R=(k(C),Symbol("entityMasks")),O=Symbol("entityComponents"),T=Symbol("entitySparseSet"),j=Symbol("entityArray"),I=(Symbol("entityIndices"),Symbol("removedEntities"),1e5),_=0,B=I,q=()=>B,U=[],P=new Map,N=e=>{if(_>=B-B/5){const e=B;(e=>{const t=B;B=I=e,_=0,U.length=0,B=e,Ee(e),ce(e),console.info(`👾 bitECS - resizing all data stores from ${t} to ${e}`)})(e+4*Math.ceil(e/2/4))}const t=U.length>Math.round(.01*I)?U.shift():_++;return e[T].add(t),P.set(t,e),e[Y].forEach((n=>{te(e,n,t)&&ne(n,t)})),e[O].set(t,new Set),t},F=(e,t)=>{if(e[T].has(t)){e[z].forEach((n=>{se(e,n,t)})),U.push(t),e[T].remove(t),e[O].delete(t),e[be].delete(e[Se].get(t)),e[Se].delete(t);for(let n=0;n<e[R].length;n++)e[R][n][t]=0}};function L(e){return()=>[e,"not"]}var Q,z=Symbol("queries"),Y=Symbol("notQueries"),V=Symbol("queryAny"),$=Symbol("queryAll"),J=Symbol("queryNone"),D=Symbol("queryMap"),G=Symbol("$dirtyQueries"),H=Symbol("queryComponents"),K=(Symbol("enterQuery"),Symbol("exitQuery"),(e,t)=>{const n=[],o=[],r=[];t[H].forEach((t=>{if("function"==typeof t){const[s,i]=t();e[ie].has(s)||ue(e,s),"not"===i&&o.push(s),"changed"===i&&(r.push(s),n.push(s))}else e[ie].has(t)||ue(e,t),n.push(t)}));const s=t=>e[ie].get(t),i=n.concat(o).map(s),c=M(),a=M(),u=M(),f=M(),y=i.map((e=>e.generationId)).reduce(((e,t)=>(e.includes(t)||e.push(t),e)),[]),h=(e,t)=>(e[t.generationId]||(e[t.generationId]=0),e[t.generationId]|=t.bitflag,e),d=n.map(s).reduce(h,{}),m=o.map(s).reduce(h,{}),p=i.reduce(h,{}),b=n.filter((e=>!e[g])).map((e=>Object.getOwnPropertySymbols(e).includes(l)?e[l]:[e])).reduce(((e,t)=>e.concat(t)),[]),S=Object.assign(c,{archetypes:[],changed:[],components:n,notComponents:o,changedComponents:r,allComponents:i,masks:d,notMasks:m,hasMasks:p,generations:y,flatProps:b,toRemove:a,entered:u,exited:f,shadows:[]});e[D].set(t,S),e[z].add(S),i.forEach((e=>{e.queries.add(S)})),o.length&&e[Y].add(S);for(let t=0;t<_;t++)e[T].has(t)&&te(e,S,t)&&ne(S,t)}),W=(e,t)=>{const n=Symbol(),o=e.flatProps[t];return((e,t)=>{if(ArrayBuffer.isView(e))e[t]=e.slice(0);else{const n=e[d].slice(0);e[t]=e.map(((t,o)=>{const{length:r}=e[o],s=r*o,i=s+r;return n.subarray(s,i)}))}})(o,n),e.shadows[t]=o[n],o[n]},X=(e,t)=>e.concat(t),Z=e=>t=>t.filter((t=>t.name===e().constructor.name)).reduce(X),ee=(Z((function(...e){return function(){return e}})),Z((function(...e){return function(){return e}})),Z((function(...e){return function(){return e}})),(...e)=>{let t;if(Array.isArray(e[0])&&(t=e[0]),void 0===t||void 0!==t[ie])return e=>e?e[j]:t[j];const n=function(e,t=!0){e[D].has(n)||K(e,n);const o=e[D].get(n);return re(e),o.changedComponents.length?((e,t)=>{t&&(e.changed=[]);const{flatProps:n,shadows:o}=e;for(let t=0;t<e.dense.length;t++){const r=e.dense[t];let s=!1;for(let t=0;t<n.length;t++){const i=n[t],l=o[t]||W(e,t);if(ArrayBuffer.isView(i[r])){for(let e=0;e<i[r].length;e++)if(i[r][e]!==l[r][e]){s=!0;break}l[r].set(i[r])}else i[r]!==l[r]&&(s=!0,l[r]=i[r])}s&&e.changed.push(r)}return e.changed})(o,t):o.dense};return n[H]=t,n[V]=void 0,n[$]=void 0,n[J]=void 0,n}),te=(e,t,n)=>{const{masks:o,notMasks:r,generations:s}=t;for(let t=0;t<s.length;t++){const i=s[t],l=o[i],c=r[i],a=e[R][i][n];if(c&&0!=(a&c))return!1;if(l&&(a&l)!==l)return!1}return!0},ne=(e,t)=>{e.toRemove.remove(t),e.entered.add(t),e.add(t)},oe=e=>{for(let t=e.toRemove.dense.length-1;t>=0;t--){const n=e.toRemove.dense[t];e.toRemove.remove(n),e.remove(n)}},re=e=>{e[G].size&&(e[G].forEach(oe),e[G].clear())},se=(e,t,n)=>{t.has(n)&&!t.toRemove.has(n)&&(t.toRemove.add(n),e[G].add(t),t.exited.add(n))},ie=Symbol("componentMap"),le=[],ce=e=>{le.forEach((t=>v(t,e)))},ae=(w,E)=>{const v=((w,E)=>{const v=Symbol("store");if(!w||!Object.keys(w).length)return S[v]={[s]:E,[g]:!0,[c]:()=>S[v]},S[v];w=JSON.parse(JSON.stringify(w));const A={},M=e=>{const t=Object.keys(e);for(const n of t)x(e[n])?(A[e[n][0]]||(A[e[n][0]]=0),A[e[n][0]]+=e[n][1]):e[n]instanceof Object&&M(e[n])};M(w);const k={[s]:E,[i]:{},[f]:{},[r]:v,[y]:Object.keys(n).reduce(((e,t)=>({...e,[t]:0})),{}),[l]:[],[u]:A};if(w instanceof Object&&Object.keys(w).length){const r=(i,g)=>{if("string"==typeof i[g])i[g]=((t,o)=>{const r=o*n[t].BYTES_PER_ELEMENT,s=new ArrayBuffer(r),i=new n[t](s);return i[b]=t===e.eid,i})(i[g],E),i[g][c]=()=>S[v],k[l].push(i[g]);else if(x(i[g])){const[r,w]=i[g];i[g]=((r,i,l)=>{const c=r[s],g=Array(c).fill(0);g[a]=i,g[b]=i===e.eid;const S=r[y],w=l<=256?e.ui8:l<=65536?e.ui16:e.ui32;if(!l)throw new Error("bitECS - Must define component array length");if(!n[i])throw new Error(`bitECS - Invalid component array property type ${i}`);if(!r[f][i]){const e=r[u][i],s=new n[i](o(e*c));s[m]=t[w],s[p]=n[w].BYTES_PER_ELEMENT,r[f][i]=s}const E=S[i],v=E+c*l;S[i]=v,g[d]=r[f][i].subarray(E,v);for(let e=0;e<c;e++){const o=l*e,r=o+l;g[e]=g[d].subarray(o,r),g[e][m]=t[w],g[e][p]=n[w].BYTES_PER_ELEMENT,g[e][h]=!0}return g})(k,r,w),i[g][c]=()=>S[v],k[l].push(i[g])}else i[g]instanceof Object&&(i[g]=Object.keys(i[g]).reduce(r,i[g]));return i};return S[v]=Object.assign(Object.keys(w).reduce(r,w),k),S[v][c]=()=>S[v],S[v]}})(w,E||q());return w&&Object.keys(w).length&&le.push(v),v},ue=(e,t)=>{if(!t)throw new Error("bitECS - Cannot register null or undefined component");const n=new Set,o=new Set,r=new Set;e[z].forEach((e=>{e.allComponents.includes(t)&&n.add(e)})),e[ie].set(t,{generationId:e[R].length-1,bitflag:e[me],store:t,queries:n,notQueries:o,changedQueries:r}),t[s]<q()&&v(t,q()),(e=>{e[me]*=2,e[me]>=2**31&&(e[me]=1,e[R].push(new Uint32Array(e[de])))})(e)},fe=(e,t,n)=>{const o=e[ie].get(t);if(!o)return!1;const{generationId:r,bitflag:s}=o;return(e[R][r][n]&s)===s},ye=(e,t,n,o=!1)=>{if(void 0===n)throw new Error("bitECS - entity is undefined.");if(!e[T].has(n))throw new Error("bitECS - entity does not exist in the world.");if(e[ie].has(t)||ue(e,t),fe(e,t,n))return;const r=e[ie].get(t),{generationId:s,bitflag:i,queries:l,notQueries:c}=r;e[R][s][n]|=i,l.forEach((t=>{t.toRemove.has(n)&&t.toRemove.remove(n);const o=te(e,t,n);o&&ne(t,n),o||se(e,t,n)})),e[O].get(n).add(t),o&&A(t,n)},he=(e,t,n,o=!0)=>{if(void 0===n)throw new Error("bitECS - entity is undefined.");if(!e[T].has(n))throw new Error("bitECS - entity does not exist in the world.");if(!fe(e,t,n))return;const r=e[ie].get(t),{generationId:s,bitflag:i,queries:l}=r;e[R][s][n]&=~i,l.forEach((t=>{t.toRemove.has(n)&&t.toRemove.remove(n);const o=te(e,t,n);o&&ne(t,n),o||se(e,t,n)})),e[O].get(n).delete(t),o&&A(t,n)},de=Symbol("size"),ge=Symbol("resizeThreshold"),me=Symbol("bitflag"),pe=Symbol("archetypes"),be=Symbol("localEntities"),Se=Symbol("localEntityLookp"),we=[],Ee=e=>{we.forEach((t=>{t[de]=e;for(let n=0;n<t[R].length;n++){const o=t[R][n];t[R][n]=w(o,e)}t[ge]=t[de]-t[de]/5}))},ve=e=>(t,...n)=>(e(t,...n),t),Ae=e;function xe(e){Q=e/1e3}function Me(){return Q}const ke=ae(),Ce=ae({x:Ae.f32,y:Ae.f32}),Re=ae({a:Ae.f32}),Oe=ae({speed:Ae.f32}),Te=ae({value:Ae.f32}),je=ae({limit:Ae.f32}),Ie=ae({limit:Ae.f32}),_e=ae({index:Ae.ui8}),Be=ae(),qe=ae({x:Ae.f32,y:Ae.f32}),Ue=ae(),Pe=ae(),Ne=ae({direction:Ae.ui8}),Fe=ae(),Le=ae({score:Ae.ui32});function Qe(e,t=1){return"rgba("+e+", "+e+", "+e+", "+t+")"}function ze(e,t){for(let n=0;n<e.length;n++){const o=e[n];if(o[0]==t[0]&&o[1]==t[1])return n}return-1}function Ye(e,t,n){for(let o=t+1;o<n;o++)if(!e.includes(o))return o;for(let n=0;n<t;n++)if(!e.includes(n))return n;return t}const Ve=[.5,1.5],$e=ee([ke]);var Je=0;for(let e=0;e<Ve.length;e++)Je+=Ve[e];const De=ee([ke,Ce]);function Ge(e,t){const n=function(){const e=Math.random()*Je;var t=0;for(let n=0;n<Ve.length;n++)if(e<(t+=Ve[n]))return n+1;return Ve.length}(),o=N(e);ye(e,ke,o),ye(e,_e,o),_e.index[o]=n,ye(e,Ce,o),Ce.x[o]=t[0],Ce.y[o]=t[1],ye(e,Oe,o),Oe.speed[o]=10,ye(e,Re,o),Re.a[o]=0,ye(e,je,o),je.limit[o]=1}function He(e,t){const n=new Array(0);for(let e=0;e<5;e++)for(let t=0;t<5;t++)n.push([e,t]);const o=De(t);for(let e=0;e<o.length;e++){const t=o[e],r=ze(n,[Ce.x[t],Ce.y[t]]);-1!=r&&n.splice(r,1)}const r=n.length;if(r<=e)for(let e=0;e<r;e++)Ge(t,n[e]);else{const o=new Array(0);for(let i=0;i<e;i++){var s=Math.floor(Math.random()*r);o.includes(s)&&(s=Ye(o,s,r)),o.push(s),Ge(t,n[s])}}const i=$e(t);for(let e=0;e<i.length;e++){const n=i[e];ye(t,Ue,n)}}var Ke=0;function We(){Ke=0}function Xe(e=1){Ke+=e}const Ze=ee([ke]),et=ee([ke,Ce,Be,L(Ue),L(je),L(Ie)]),tt=ee([Fe]),nt=ee([Le]);function ot(e,t,n){const o=new Array(5);for(let e=0;e<5;e++){o[e]=new Array(5);for(let t=0;t<5;t++)o[e][t]=[0,0,0,0]}for(let e=0;e<n.length;e++){const t=n[e],r=Ce.x[t],s=Ce.y[t];for(let e=0;e<s;e++)o[r][e][2]+=1;for(let e=0;e<r;e++)o[e][s][3]+=1;for(let e=s+1;e<5;e++)o[r][e][0]+=1;for(let e=r+1;e<5;e++)o[e][s][1]+=1}var r=!0;for(let s=0;s<n.length;s++){const i=n[s],l=Ce.x[i],c=Ce.y[i];he(e,Be,i),ye(e,Oe,i),Oe.speed[i]=20,ye(e,qe,i);const a=o[l][c][t];if(ye(e,Te,i),Te.value[i]=40,ye(e,Ne,i),Ne.direction[i]=t,0==t?(qe.x[i]=l,qe.y[i]=a):1==t?(qe.x[i]=a,qe.y[i]=c):2==t?(qe.x[i]=l,qe.y[i]=4-a):3==t&&(qe.x[i]=4-a,qe.y[i]=c),r){const e=qe.x[i],t=qe.y[i];l==e&&c==t||(r=!1)}}if(r){for(let t=0;t<n.length;t++){const o=n[t];he(e,Oe,o),he(e,qe,o),he(e,Te,o),he(e,Ne,o),ye(e,Be,o)}He(3,e)}else new Audio("click_sound.ogg").play()}function rt(e,t,n,o,r,s,i){e.save(),e.font=(r?"bold ":"normal ")+o+"px Arial",e.textAlign="center",e.textBaseline="middle",e.fillStyle=n,e.fillText(t,s,i),e.restore()}const st=ee([Re,Oe,je]),it=ve((e=>{const t=st(e);for(let r=0;r<t.length;r++){const s=t[r];var n=Re.a[s];const i=je.limit[s];var o=!1;(n+=Oe.speed[s]*Me())>=i&&(n=i,o=!0),Re.a[s]=n,o&&(he(e,je,s),he(e,Oe,s),ye(e,Be,s))}return e})),lt=ee([Re,Oe,Ie]),ct=ve((e=>{const t=lt(e);for(let r=0;r<t.length;r++){const s=t[r];var n=Re.a[s];const i=Ie.limit[s];var o=!1;(n-=Oe.speed[s]*Me())<=i&&(n=i,o=!0),Re.a[s]=n,o&&F(e,s)}return e})),at=ee([ke,Oe,Te,Ce,qe]);function ut(e,t,n,o){Ce.x[t]=n,Ce.y[t]=o,he(e,qe,t),he(e,Oe,t),he(e,Te,t),ye(e,Ue,t)}const ft=ve((e=>{const t=at(e),n=Me();for(let o=0;o<t.length;o++){const r=t[o],s=Ce.x[r],i=Ce.y[r],l=qe.x[r],c=qe.y[r],a=Oe.speed[r],u=[l-s,c-i],f=Math.sqrt(u[0]*u[0]+u[1]*u[1]);if(f<1e-4)ut(e,r,l,c);else{u[0]=u[0]/f,u[1]=u[1]/f;const t=s+u[0]*n*a,o=i+u[1]*n*a,y=[l-t,c-o];u[0]*y[0]+u[1]*y[1]<0?ut(e,r,l,c):(Ce.x[r]=t,Ce.y[r]=o)}}return e})),yt=ee([Oe,Te]),ht=ve((e=>{const t=yt(e),n=Me();for(let e=0;e<t.length;e++){const o=t[e];Oe.speed[o]+=Te.value[o]*n}return e}));function dt(e,t){ye(t,Ie,e),Ie.limit[e]=0,ye(t,Oe,e),Oe.speed[e]=10,ye(t,Pe,e)}function gt(e){const t=_e.index[e[0]];for(let n=1;n<e.length;n++)if(_e.index[e[n]]!=t)return!1;return!0}const mt=ee([ke]),pt=ee([ke,_e,Ce,Ue,L(je)]),bt=ve((e=>{const t=mt(e),n=pt(e);if(t.length==n.length){const t=new Array(5),r=new Array(5);for(let e=0;e<5;e++)t[e]=new Array(0),r[e]=new Array(0);for(let o=0;o<n.length;o++){const s=n[o],i=Ce.x[s],l=Ce.y[s];t[i].push(s),r[l].push(s),he(e,Ue,s)}var o=!1;for(let n=0;n<5;n++){const s=t[n],i=r[n];if(5==s.length&&gt(s)){Xe(),o=!0;for(let t=0;t<5;t++)dt(s[t],e)}if(5==i.length&&gt(i)){Xe(),o=!0;for(let t=0;t<5;t++)dt(i[t],e)}}o&&new Audio("release_sound.ogg").play()}return e})),St=ee([ke]),wt=ee([ke,Ne,L(Pe),L(qe),L(Ue)]),Et=ve((e=>{const t=St(e),n=wt(e);return t.length>0&&t.length==n.length&&ot(e,Ne.direction[t[0]],t),e})),vt=ee([ke]),At=ee([Fe]),xt=ve((e=>(0==At(e).length&&0==vt(e).length&&He(3,e),e))),Mt=ee([ke,Be,L(Ue),L(je),L(Ie)]),kt=ve((e=>{const t=Mt(e);if(25==t.length){for(let n=0;n<t.length;n++){const o=t[n];he(e,Be,o)}const n=N(e);ye(e,Le,n),Le.score[n]=Ke,new Audio("finish_sound.ogg").play()}return e})),Ct=document.getElementById("canvas"),Rt=null==Ct?void 0:Ct.getContext("2d");var Ot,Tt;const jt=new Array(0);function It(){if(!Ct)return;const e=performance.now(),t=e-Ot;Ot=e,xe(t);for(let e=0;e<jt.length;e++)jt[e](Tt);window.requestAnimationFrame(It)}window.onkeydown=e=>{!function(e,t){const n=Ze(t),o=et(t),r=tt(t),s=nt(t);if(s.length>0){if(13==e){F(t,s[0]);for(let e=0;e<n.length;e++){const o=n[e];F(t,o)}We(),new Audio("start_sound.ogg").play()}}else r.length>0?(F(t,r[0]),new Audio("start_sound.ogg").play()):n.length==o.length&&function(e){return 37==e||38==e||39==e||40==e}(e)&&ot(t,e-37,o)}(e.keyCode,Tt)},window.onkeyup=e=>{e.keyCode},function(){Ot=performance.now(),Tt=((...e)=>{const t="object"==typeof e[0]?e[0]:{};return((e,t=q())=>{e[de]=t,e[j]&&e[j].forEach((t=>F(e,t))),e[R]=[new Uint32Array(t)],e[O]=new Map,e[pe]=[],e[T]=M(),e[j]=e[T].dense,e[me]=1,e[ie]=new Map,e[D]=new Map,e[z]=new Set,e[Y]=new Set,e[G]=new Set,e[be]=new Map,e[Se]=new Map})(t,"number"==typeof e[0]?e[0]:"number"==typeof e[1]?e[1]:q()),we.push(t),t})(),We();const e=N(Tt);if(ye(Tt,Fe,e),Rt){jt.push(it),jt.push(ct),jt.push(ht),jt.push(ft),jt.push(bt),jt.push(Et),jt.push(xt),jt.push(kt);const e=function(e,t,n){const o=Qe(28);return ve((r=>(e.clearRect(0,0,t,n),e.save(),e.fillStyle=o,e.fillRect(0,0,t,n),e.restore(),r)))}(Rt,Ct.width,Ct.height);jt.push(e);const t=function(e,t){const n=new Array(0);for(let e=0;e<Ve.length;e++){const t=Qe(Math.floor(64+128*e/(Ve.length-1)));n.push(t)}const o=t/5,r=ee([ke,_e,Ce,L(Re)]),s=ee([ke,_e,Ce,Re]);function i(t,n,r){e.fillStyle=r,e.fillRect(o*n+5,o*t+5,o-10,o-10)}return ve((t=>{e.save();const o=r(t);for(let e=0;e<o.length;e++){const t=o[e],r=Ce.x[t],s=Ce.y[t],l=_e.index[t];i(r,s,n[l-1])}const l=s(t);for(let e=0;e<l.length;e++){const t=l[e],n=Ce.x[t],o=Ce.y[t],r=_e.index[t],s=Re.a[t];i(n,o,Qe(Math.floor(64+128*(r-1)/(Ve.length-1)),s))}return e.restore(),t}))}(Rt,Ct.width);jt.push(t);const n=function(e,t,n){const o="rgba(0, 0, 0, "+String(.5)+")",r=Qe(212),s=ee([Le]);return ve((i=>{const l=s(i);if(1==l.length){const s=l[0];e.save(),e.fillStyle=o,e.fillRect(0,0,t,n),e.restore(),rt(e,"Score: "+Le.score[s],r,40,!0,t/2,n/2-20),rt(e,"Press Enter to restart",r,20,!1,t/2,n/2+60)}return i}))}(Rt,Ct.width,Ct.height);jt.push(n);const o=function(e,t,n){const o=Qe(212),r=ee([Fe]);return ve((s=>(1==r(s).length&&(rt(e,"Use arrows to move tiles",o,40,!1,t/2,n/2-50),rt(e,"←    ↑   →   ↓",o,36,!1,t/2,n/2-10),rt(e,"Press any key to start",o,24,!1,t/2,n/2+80)),s)))}(Rt,Ct.width,Ct.height);jt.push(o)}window.requestAnimationFrame(It)}()})();